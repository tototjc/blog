---
import type { ComponentProps } from 'astro/types'

import type { Post } from '@/utils/getContents'

import GeneralLayout from './General.astro'
import ArticleHeader from '@/components/ArticleHeader.astro'

import '@/styles/markdown.css'
import 'katex/dist/katex.css'

type Props = ComponentProps<typeof GeneralLayout> & Post['data']

const { title, description, category, pubDate, updDate, readingTime } = Astro.props

const headerProps = { title, category, pubDate, updDate, words: readingTime?.words.total }

const titleId = '_top'
---

<GeneralLayout {title} {description}>
  <ArticleHeader id={titleId} {...headerProps} />
  <article data-pagefind-body>
    <slot />
  </article>
</GeneralLayout>
